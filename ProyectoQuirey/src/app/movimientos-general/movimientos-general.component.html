
<mat-sidenav-container class="sidenav-container fondo-negro">
    <mat-sidenav #sidenav mode="side" class="sidenav">
      <!-- Contenido del menú -->
      <div class="contenedor">
        <mat-nav-list class="barra">
          <img
            src="assets/logo quirey limpio.png"
            alt="Icono"
            width="150"
            height="150"
          />
          <a class="letrasBarra" routerLink="/almacenes">Almacenes</a>
          <a class="letrasBarra" routerLink="/articulos">Articulos</a>
          <a class="letrasBarra" routerLink="/categoriamodulos">Categoria de Modulos</a>
          <a class="letrasBarra" routerLink="/clientes">Clientes</a>
          <a class="letrasBarra" routerLink="/detalleperfil">Detalle de Perfil</a>
          <a class="letrasBarra" routerLink="/empleados">Empleados</a>
          <a class="letrasBarra" routerLink="/existencias">Existencias</a>
          <a class="letrasBarra" routerLink="/modulos">Modulos</a>
          <a class="letrasBarra" routerLink="/modulosusuario">Modulos Usuario</a>
          <a class="letrasBarra" routerLink="/perfiles">Perfiles</a>
          <a class="letrasBarra" routerLink="/personas">Personas</a>
          <a class="letrasBarra" routerLink="/puestos">Puestos</a>
          <a class="letrasBarra" routerLink="/rutas">Rutas</a>
          <a class="letrasBarra" routerLink="/sucursalsede">Sucursal Sede</a>
          <a class="letrasBarra" routerLink="/usuarios">Usuarios</a>
          <a class="letrasBarra" routerLink="/puntodeventa">puntodeventa</a>
          <a class="letrasBarra" routerLink="/login">cerrar sesion</a>
        </mat-nav-list>
      </div>
    </mat-sidenav>

    
    <mat-sidenav-content class="content animated-background">
        <mat-toolbar
          class="titulo1"
          style="background-color: #df9412; color: rgb(255, 255, 255)"
        >
          <button class="Menuicono" mat-icon-button (click)="sidenav.toggle()">
            <mat-icon>menu</mat-icon>
          </button>
          <span class="Encabezado">MOVIMIENTOS DE INVENTARIO</span>
        </mat-toolbar>
    

    
    <div>
        <mat-form-field class="mat-form-field">
          <mat-label>Filtrar</mat-label>
          <input
            matInput
            (keyup)="applyFilterInventario($event)"
            placeholder="Buscar..."
            #input
          />
        </mat-form-field>
      </div>
      
      <div style="border: 1px solid black; padding: 10px; width: fit-content;">
        <p *ngIf="data !== null">El valor de data es: {{ data }}</p>
      </div>
      
  
    <div class="toolbar">
      <button mat-button (click)="abrirInsertarModalInventario()" class="orange-button">
        Añadir Movimiento
      </button>
    </div>

    <div class="TabladeDatos">
      <table mat-table [dataSource]="dataSourceInventario" matSort>
        <ng-container matColumnDef="Id">
          <th mat-header-cell *matHeaderCellDef mat-sort-header>Id</th>
          <td mat-cell *matCellDef="let departamento">{{ departamento.Id }}</td>
        </ng-container>
        <ng-container matColumnDef="IdTipoMov">
          <th mat-header-cell *matHeaderCellDef mat-sort-header>IdTipoMov</th>
          <td mat-cell *matCellDef="let departamento">
            {{ departamento.IdTipoMov }}
          </td>
        </ng-container>
        <ng-container matColumnDef="IdAlmacen">
          <th mat-header-cell *matHeaderCellDef mat-sort-header>IdAlmacen</th>
          <td mat-cell *matCellDef="let departamento">
            {{ departamento.IdAlmacen }}
          </td>
        </ng-container>
        <ng-container matColumnDef="FechaMovimiento">
          <th mat-header-cell *matHeaderCellDef mat-sort-header>
            FechaMovimiento
          </th>
          <td mat-cell *matCellDef="let departamento">
            {{ departamento.FechaMovimiento }}
          </td>
        </ng-container>
        <ng-container matColumnDef="Estatus">
          <th mat-header-cell *matHeaderCellDef mat-sort-header>Estatus</th>
          <td mat-cell *matCellDef="let departamento">
            {{ departamento.Estatus }}
          </td>
        </ng-container>
        <ng-container matColumnDef="NombreAlmacen">
          <th mat-header-cell *matHeaderCellDef mat-sort-header>
            NombreAlmacen
          </th>
          <td mat-cell *matCellDef="let departamento">
            {{ departamento.NombreAlmacen }}
          </td>
        </ng-container>
        <ng-container matColumnDef="NombreMovimiento">
          <th mat-header-cell *matHeaderCellDef mat-sort-header>
            NombreMovimiento
          </th>
          <td mat-cell *matCellDef="let departamento">
            {{ departamento.NombreMovimiento }}
          </td>
        </ng-container>
        <ng-container matColumnDef="FechaActualiza">
          <th mat-header-cell *matHeaderCellDef mat-sort-header>
            FechaActualiza
          </th>
          <td mat-cell *matCellDef="let departamento">
            {{ departamento.FechaActualiza }}
          </td>
        </ng-container>
        <ng-container matColumnDef="UsuarioActualiza">
          <th mat-header-cell *matHeaderCellDef mat-sort-header>
            UsuarioActualiza
          </th>
          <td mat-cell *matCellDef="let departamento">
            {{ departamento.UsuarioActualiza }}
          </td>
        </ng-container>
        <ng-container matColumnDef="Tipo_Descripcion">
          <th mat-header-cell *matHeaderCellDef mat-sort-header>
            Tipo_Descripcion
          </th>
          <td mat-cell *matCellDef="let departamento">
            {{ departamento.Tipo_Descripcion }}
          </td>
        </ng-container>

        <ng-container matColumnDef="Acciones">
          <th mat-header-cell *matHeaderCellDef>Acciones</th>
          <td mat-cell *matCellDef="let elemento">
            <mat-icon class="editar" (click)="abrirEditarModalInventario(elemento)"
              >edit</mat-icon
            >
            <mat-icon class="borrar" (click)="eliminarInventario(elemento.Id)"
              >delete</mat-icon
            >
          </td>
        </ng-container>

        <mat-header-row *matHeaderRowDef="displayedColumnsInventario"></mat-header-row>
        <mat-row
          class="mat-row"
          *matRowDef="let row; columns: displayedColumnsInventario"
        ></mat-row>
      </table>

      <mat-paginator
        [pageSizeOptions]="[5, 10, 20]"
        showFirstLastButtons
        aria-label="Select page of periodic elements"
      >
      </mat-paginator>


    
      

      <h3>Export as XLSX</h3>
      <div class="container">
        <button mat-raised-button color="primary" (click)="exportAsXLSXInventario()">
          Export
          <mat-icon>trending_down</mat-icon>
        </button>
        Enbsp;
        <button
          mat-raised-button
          color="accent"
          (click)="exportAsXLSXFilteredInventario()"
        >
          Export
          <mat-icon>trending_down</mat-icon>
          Filtered
        </button>
      </div>
    </div>





    <div>
        <mat-form-field class="mat-form-field">
          <mat-label>Filtrar</mat-label>
          <input
            matInput
            (keyup)="applyFilterDetalle($event)"
            placeholder="Buscar..."
            #input
          />
        </mat-form-field>
      </div>

    <div class="toolbar">
        <button mat-button (click)="abrirInsertarModalDetalle()" class="orange-button">
          Añadir Detalle
        </button>
      </div>
  
      <div class="TabladeDatos">
        <table mat-table [dataSource]="dataSourceDetalle" matSort>
          <ng-container matColumnDef="Id">
            <th mat-header-cell *matHeaderCellDef mat-sort-header>Id</th>
            <td mat-cell *matCellDef="let departamento">{{ departamento.Id }}</td>
          </ng-container>
          <ng-container matColumnDef="Codigo">
            <th mat-header-cell *matHeaderCellDef mat-sort-header>Codigo</th>
            <td mat-cell *matCellDef="let departamento">
              {{ departamento.Codigo }}
            </td>
          </ng-container>
          <ng-container matColumnDef="IdMovimiento">
            <th mat-header-cell *matHeaderCellDef mat-sort-header>
              IdMovimiento
            </th>
            <td mat-cell *matCellDef="let departamento">
              {{ departamento.IdMovimiento }}
            </td>
          </ng-container>
          <ng-container matColumnDef="Cantidad">
            <th mat-header-cell *matHeaderCellDef mat-sort-header>Cantidad</th>
            <td mat-cell *matCellDef="let departamento">
              {{ departamento.Cantidad }}
            </td>
          </ng-container>
          <ng-container matColumnDef="Costo">
            <th mat-header-cell *matHeaderCellDef mat-sort-header>Costo</th>
            <td mat-cell *matCellDef="let departamento">
              {{ departamento.Costo }}
            </td>
          </ng-container>
          <ng-container matColumnDef="Estatus">
            <th mat-header-cell *matHeaderCellDef mat-sort-header>Estatus</th>
            <td mat-cell *matCellDef="let departamento">
              {{ departamento.Estatus }}
            </td>
          </ng-container>
          <ng-container matColumnDef="FechaActualiza">
            <th mat-header-cell *matHeaderCellDef mat-sort-header>
              FechaActualiza
            </th>
            <td mat-cell *matCellDef="let departamento">
              {{ departamento.FechaActualiza }}
            </td>
          </ng-container>
          <ng-container matColumnDef="UsuarioActualiza">
            <th mat-header-cell *matHeaderCellDef mat-sort-header>
              UsuarioActualiza
            </th>
            <td mat-cell *matCellDef="let departamento">
              {{ departamento.UsuarioActualiza }}
            </td>
          </ng-container>
          <ng-container matColumnDef="Descripcion">
            <th mat-header-cell *matHeaderCellDef mat-sort-header>Descripcion</th>
            <td mat-cell *matCellDef="let departamento">
              {{ departamento.Descripcion }}
            </td>
          </ng-container>
  
          <ng-container matColumnDef="Acciones">
            <th mat-header-cell *matHeaderCellDef>Acciones</th>
            <td mat-cell *matCellDef="let elemento">
              <mat-icon class="editar" (click)="abrirEditarModalDetalle(elemento)"
                >edit</mat-icon
              >
              <mat-icon class="borrar" (click)="eliminarDetalle(elemento.Id)"
                >delete</mat-icon
              >
            </td>
          </ng-container>
  
          <mat-header-row *matHeaderRowDef="displayedColumnsDetalle"></mat-header-row>
          <mat-row
            class="mat-row"
            *matRowDef="let row; columns: displayedColumnsDetalle"
          ></mat-row>
        </table>
        <mat-paginator
          [pageSizeOptions]="[5, 10, 20]"
          showFirstLastButtons
          aria-label="Select page of periodic elements"
        >
        </mat-paginator>
        <h3>Export as XLSX</h3>
        <div class="container">
          <button mat-raised-button color="primary" (click)="exportAsXLSXDetalle()">
            Export
            <mat-icon>trending_down</mat-icon>
          </button>
          Enbsp;
          <button
            mat-raised-button
            color="accent"
            (click)="exportAsXLSXFilteredDetalle()"
          >
            Export
            <mat-icon>trending_down</mat-icon>
            Filtered
          </button>
        </div>
      </div>

